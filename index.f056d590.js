function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},i=n.parcelRequire6a9f;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},n.parcelRequire6a9f=i),i.register("27Lyk",(function(t,n){var r,a;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>a),(e=>a=e));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},a=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("27Lyk").register(JSON.parse('{"f9fpV":"index.f056d590.js","8hDBS":"beef.4f89f9eb.png","brPGh":"bun-bottom.1436e26e.png","7eHnl":"bun-top.724eb27e.png","7TcY0":"bun.a5ba2523.png","FGNIu":"cheese.06703e6a.png","dLkvN":"mayo.6af42e28.png","g5Kwd":"onion-single.0108c299.png","gKJ7O":"onion.468a857c.png","2ddIw":"pickle-single.8daedd58.png","eExU2":"pickle.4785063b.png","8oBAW":"salad.7239c152.png","5o7X0":"tomato-single.2c112c81.png","1tllM":"tomato.3ea7a45a.png","1VhFV":"beef.9cb6f7d4.webp","8uGuw":"bun-bottom.b3e2277b.webp","1FH3R":"bun-top.0b7c2aec.webp","adkM7":"bun.69e08ee4.webp","k8kzP":"cheese.0db216b1.webp","le3WD":"mayo.c03c83ce.webp","8TsAk":"onion-single.76b8ae42.webp","bDBSn":"onion.76c2d84d.webp","5zTll":"pickle-single.2efd6cdf.webp","iPeNR":"pickle.c11801ad.webp","b1Lyn":"salad.330aee2a.webp","dRLry":"tomato-single.37ad23a3.webp","9WETe":"tomato.94256264.webp","5Z74A":"sprite.cf422900.svg","5tWNn":"emoji-shocked.2367a1d6.png","lbhYX":"emoji-shocked.67cf7068.webp"}'));const s={recipe:{ingredients:{"bun-top":{name:"bun-top",quantity:0,calories:128,mass:46,time:.5,price:1},bun:{name:"bun",quantity:0,calories:128,mass:46,time:.5,price:.5},"bun-bottom":{name:"bun-bottom",quantity:1,calories:128,mass:46,time:.5,price:1},beef:{name:"beef",quantity:0,calories:200,mass:85,time:3,price:4.5},mayo:{name:"mayo",quantity:0,calories:120,mass:5,time:.5,price:1.3},cheese:{name:"cheese",quantity:0,calories:66,mass:21,time:.5,price:1},tomato:{name:"tomato",quantity:0,calories:15,mass:10,time:1,price:1},onion:{name:"onion",quantity:0,calories:10,mass:10,time:1,price:1.1},pickle:{name:"pickle",quantity:0,calories:10,mass:25,time:1,price:1},salad:{name:"salad",quantity:0,calories:9,mass:5,time:1,price:1}},order:["bun-bottom"]},favorites:[]},o=function(e){s.recipe.ingredients[e].quantity-=1;const t=s.recipe.order.findLastIndex((t=>t===e));return s.recipe.order.splice(t,1),t},l=function(e,t){return s.recipe.ingredients[e].quantity<t?function(e){"bun-top"===s.recipe.order.at(-1)&&o("bun-top"),s.recipe.ingredients[e].quantity+=1,s.recipe.order.push(e)}(e):o(e)},d=function(){const e=Object.values(s.recipe.ingredients).reduce(((e,t)=>(Object.keys(e).forEach((n=>{e[n]+=t[n]*t.quantity})),e)),{calories:0,price:0,time:0,mass:0});return e.completed="bun-top"===s.recipe.order.at(-1),e},u=function(){const e=[];for(let t=10;t<=20;t++){const n=new Date;n.setHours(t,0,0,0),e.push(n)}const t=new Date,n=new Date(+t+18e5+6e4*d().time);return e.unshift(new Date(n)),e.filter((e=>e>=n))};class c{_data;render(e){this._data=e;const t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}update(e){this._data=e;const t=this._generateMarkup(),n=document.createRange().createContextualFragment(t),r=Array.from(n.querySelectorAll("*")),a=Array.from(this._parentElement.querySelectorAll("*"));r.forEach(((e,t)=>{const n=a[t];!e.isEqualNode(n)&&e.firstChild?.nodeValue.trim()&&(n.textContent=e.textContent),e.isEqualNode(n)||Array.from(e.attributes).forEach((e=>n.setAttribute(e.name,e.value)))}))}_clear(){this._parentElement.innerHTML=""}}var p,m;m=new URL(i("27Lyk").resolve("8hDBS"),import.meta.url).toString();var _;_=new URL(i("27Lyk").resolve("brPGh"),import.meta.url).toString();var g;g=new URL(i("27Lyk").resolve("7eHnl"),import.meta.url).toString();var b;b=new URL(i("27Lyk").resolve("7TcY0"),import.meta.url).toString();var v;v=new URL(i("27Lyk").resolve("FGNIu"),import.meta.url).toString();var h;h=new URL(i("27Lyk").resolve("dLkvN"),import.meta.url).toString();var y;y=new URL(i("27Lyk").resolve("g5Kwd"),import.meta.url).toString();var f;f=new URL(i("27Lyk").resolve("gKJ7O"),import.meta.url).toString();var L;L=new URL(i("27Lyk").resolve("2ddIw"),import.meta.url).toString();var S;S=new URL(i("27Lyk").resolve("eExU2"),import.meta.url).toString();var k;k=new URL(i("27Lyk").resolve("8oBAW"),import.meta.url).toString();var E;E=new URL(i("27Lyk").resolve("5o7X0"),import.meta.url).toString();var w;w=new URL(i("27Lyk").resolve("1tllM"),import.meta.url).toString(),p={beef:m,"bun-bottom":_,"bun-top":g,bun:b,cheese:v,mayo:h,"onion-single":y,onion:f,"pickle-single":L,pickle:S,salad:k,"tomato-single":E,tomato:w};var H,R;R=new URL(i("27Lyk").resolve("1VhFV"),import.meta.url).toString();var A;A=new URL(i("27Lyk").resolve("8uGuw"),import.meta.url).toString();var q;q=new URL(i("27Lyk").resolve("1FH3R"),import.meta.url).toString();var $;$=new URL(i("27Lyk").resolve("adkM7"),import.meta.url).toString();var F;F=new URL(i("27Lyk").resolve("k8kzP"),import.meta.url).toString();var T;T=new URL(i("27Lyk").resolve("le3WD"),import.meta.url).toString();var U;U=new URL(i("27Lyk").resolve("8TsAk"),import.meta.url).toString();var M;M=new URL(i("27Lyk").resolve("bDBSn"),import.meta.url).toString();var x;x=new URL(i("27Lyk").resolve("5zTll"),import.meta.url).toString();var P;P=new URL(i("27Lyk").resolve("iPeNR"),import.meta.url).toString();var I;I=new URL(i("27Lyk").resolve("b1Lyn"),import.meta.url).toString();var N;N=new URL(i("27Lyk").resolve("dRLry"),import.meta.url).toString();var O;O=new URL(i("27Lyk").resolve("9WETe"),import.meta.url).toString(),H={beef:R,"bun-bottom":A,"bun-top":q,bun:$,cheese:F,mayo:T,"onion-single":U,onion:M,"pickle-single":x,pickle:P,salad:I,"tomato-single":N,tomato:O};var D=new class extends c{_parentElement=document.querySelector(".burger__ingredients");update(e,t){if(t){const n=Array.from(this._parentElement.querySelectorAll(".burger__ingredient")),r=n[t];r.classList.add("burger__ingredient--delete"),r.addEventListener("animationend",this.render.bind(this,e));n.slice(t+1).forEach((e=>{const t=parseInt(e.style.bottom)-5+"%";e.style.bottom=t}))}else{const t=this._parentElement.querySelector(".burger__ingredient--bun-top");t?(t.classList.add("burger__ingredient--delete"),t.addEventListener("animationend",this._renderNew.bind(this,e))):this._renderNew(e)}}_renderNew(e){this.render(e),this._parentElement.querySelector(".burger__ingredient:last-child").classList.add("burger__ingredient--new")}_generateMarkup(){return this._data.map(this._generateIngredientMarkup).join("")}_generateIngredientMarkup(e,n,r){return`\n    <picture class="burger__ingredient burger__ingredient--${e}"\n     style="bottom:${5*n}%" >\n      <source srcset="${t(H)[e]}" type='image/webp'>\n      <source srcset="${t(p)[e]}" type='image/png'>\n      <img src="${t(p)[e]}" alt="${e}" />\n    </picture>\n    `}};var C,j=new class extends c{_parentElement=document.querySelector(".ingredients");addHandlerUpdateQuantity(e){this._parentElement.addEventListener("click",(function(t){const n=t.target.closest(".btn-update-quantity");if(!n)return;const{name:r,updateTo:a}=n.dataset;a<0||e(r,+a)}))}_generateMarkup(){return Object.values(this._data).filter((e=>!e.name.includes("-"))).map(this._generateCardMarkup).join("")}_generateCardMarkup(e){const{name:n,quantity:r}=e;return`\n    <div class="card">\n      <picture class="card__img-box">\n        <source srcset="${t(H)[`${n}-single`]||t(H)[n]}" type="image/webp">\n        <source srcset="${t(p)[`${n}-single`]||t(p)[n]}" type="image/png">\n        <img class="card__img" src="${t(p)[`${n}-single`]||t(p)[n]}" alt="${n}">\n      </picture>\n\n      <p class="card__title">${n}</p>\n\n      <div class="card__controls">\n        <button \n          class="card__btn btn-update-quantity" \n          data-update-to=${r-1} \n          data-name=${n}\n          >&minus;\n          </button>\n\n        <span class="card__quantity">${r}</span>\n\n        <button \n        class="card__btn btn-update-quantity" \n        data-update-to=${r+1} \n        data-name=${n}>&plus;\n        </button>\n      </div>\n    </div>\n    `}};C=new URL(i("27Lyk").resolve("5Z74A"),import.meta.url).toString();var B=new class extends c{_parentElement=document.querySelector(".summary");_generateMarkup(){return` \n    <h2 class="summary__heading heading-secondary">Summary</h2>\n    <span class="summary__price">&dollar;${this._data.price.toFixed(2)}</span>\n    <button class="summary__btn">Checkout</button>\n\n    <p class="summary__message">Build a <span class="paragraph--accent">$10</span> burger and get a gift!</p>\n\n    <div class="summary__details">\n      <div>\n        <svg class="summary__icon summary__icon--time">\n          <use href="${t(C)}#time"></use>\n        </svg>\n        <span>${this._data.time} min</span></div>\n      <div>\n        <svg class="summary__icon summary__icon--mass">\n          <use href="${t(C)}#scales"></use>\n        </svg>\n        <span>${this._data.mass} g</span></div>\n      <div>\n        <svg class="summary__icon summary__icon--fire">\n          <use href="${t(C)}#fire"></use>\n        </svg>\n        <span>${this._data.calories} kcal</span></div>\n    </div>\n    `}};class W extends c{_parentElement;_tooltipMessage;_tooltipPngImg;_tooltipWebpImg;_showTooltip(){this._parentElement.classList.remove("hidden")}_hideTooltip(){this._parentElement.classList.add("hidden")}_generateMarkup(){let e="";this._tooltipPngImg&&this._tooltipWebpImg&&(e=`<picture>\n        <source srcset=${this._tooltipWebpImg} type="image/webp">\n        <source srcset="src/img/emojis/emoji-shocked.png" type="image/png">\n        <img class="tooltip__emoji" src=${this._tooltipPngImg}>\n      </picture>\n    `);return`\n      ${e}\n      <p>${this._tooltipMessage}</p>\n    `}}var V;V=new URL(i("27Lyk").resolve("5tWNn"),import.meta.url).toString();var G;G=new URL(i("27Lyk").resolve("lbhYX"),import.meta.url).toString();var z=new class extends W{_parentElement=document.querySelector(".burger__tooltip ");_tooltipMessage="Are you sure?";_tooltipPngImg=t(V);_tooltipWebpImg=t(G);update(e){e.calories>=3e3?this._showTooltip():this._hideTooltip()}};new class extends c{_navParent=document.querySelector(".nav");_burgerParent=document.querySelector(".burger-demo");_mobileNavBtn=document.querySelector(".mobile-nav-btn");constructor(){super(),this.addHandlerToggleTabs(),this.addHandlerToggleMobileNav()}addHandlerToggleTabs(){[this._burgerParent,this._navParent].forEach((e=>e.addEventListener("click",this._toggleTabs.bind(this))))}addHandlerToggleMobileNav(){this._mobileNavBtn.addEventListener("click",this._toggleMobileNav.bind(this))}_toggleMobileNav(){this._navParent.classList.toggle("nav-open")}_toggleTabs(e){e.preventDefault();const t=e.target.closest(".nav__link")||e.target.closest(".burger-demo__btn");if(!t)return;const n=t.getAttribute("href");this._navParent.querySelectorAll(".nav__link").forEach((e=>{e.getAttribute("href")===n?e.classList.add("nav__link--active"):e.classList.remove("nav__link--active")}));document.querySelectorAll(".tab").forEach((e=>e.classList.add("hidden"))),document.querySelector(n).classList.remove("hidden"),this._navParent.classList.remove("nav-open")}};var K=new class extends c{_parentElement=document.querySelector(".modal");_modalOpenBtn=document.querySelector(".summary__btn");constructor(){super(),this._addHandlerToggleModal()}_addHandlerToggleModal(){[this._parentElement,this._modalOpenBtn].forEach((e=>e.addEventListener("click",this._toggleModal.bind(this))))}_toggleModal(e){("button"===e.target.type||"reset"===e.target.type||e.target.classList.contains("modal__backdrop"))&&this._parentElement.classList.toggle("hidden")}update(e){e.completed?this._modalOpenBtn.removeAttribute("disabled"):this._modalOpenBtn.setAttribute("disabled","")}};new class extends c{_parentElement=document.querySelector(".burger-demo");_animationsCounter=0;constructor(){super(),this.addAnimationHandler()}addAnimationHandler(){this._parentElement.addEventListener("animationend",this._updateAnimationCounter.bind(this))}_updateAnimationCounter(){this._animationsCounter+=1,this._animationsCounter===this._parentElement.getAnimations().length&&(this._parentElement.dataset.type="exploded")}};new class extends c{_parentElement=document.querySelector(".form");_phoneInput=this._parentElement.querySelector("input[type='tel']");_submitBtn=this._parentElement.querySelector("button[type='submit']");constructor(){super(),this._addResetHandler(),this._addPhoneFocusHandler(),this._addPhoneMaskHandler(),this._addValidationHandler()}_addResetHandler(){this._parentElement.addEventListener("reset",(e=>{e.target.querySelectorAll(".form__input").forEach((e=>e.classList.remove("form__input--invalid")))}))}_addPhoneFocusHandler(){this._phoneInput.addEventListener("focus",(e=>{""===e.target.value&&(e.target.value="+7")}))}_addPhoneMaskHandler(){this._phoneInput.addEventListener("input",this._maskPhone)}_maskPhone(e){const t=e.target.value.replace(/\D/g,"").replace(/^(\+\d)?(\d)/,"+7 ($1").replace(/^(\+\d) (\(\d{3})(\d)/,"$1 $2) $3").replace(/(\d{3})(\d{1,4})/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1");e.target.value=t}_addValidationHandler(){this._parentElement.addEventListener("input",this._toggleInvalid.bind(this)),this._parentElement.addEventListener("focusout",this._toggleInvalid.bind(this))}_toggleInvalid(e){const{type:t}=e.target.dataset,{value:n}=e.target;let r;switch(t){case"name":case"address":r=this._validateText(n);break;case"phone":r=this._validatePhone(n);break;case"time":r=this._validateTime(n);break;default:return}r?e.target.classList.remove("form__input--invalid"):("time"===t&&e.target.setCustomValidity("Looks like it's not our working hours. Come back later! :)"),e.target.classList.add("form__input--invalid"))}_validateText(e){return 0!==e.trim().length}_validatePhone(e){return/^\+\d \(\d{3}\) \d{3}-\d{4}/.test(e)}_validateTime(e){const t=(new Date).setHours(10,0,0,0),n=(new Date).setHours(20,0,0,0),r=new Date(e);return r>=t&&r<=n}};var X=new class extends c{_parentElement=document.querySelector(".form__input#time");_generateMarkup(){return this._data.map(this._generateTimeOptionMarkup).join("")}_generateTimeOptionMarkup(e,t){const n=e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}),r=0===t?`~ ${n} ASAP`:n;return`<option value=${e.toISOString()}>${r}</option>`}};let Y;const J=function(e,t){clearTimeout(Y),Z(e,t),Q()},Q=()=>{Y=setTimeout((()=>{"bun-top"!==s.recipe.order.at(-1)&&Z("bun-top",1)}),2e3)},Z=function(e,t){const n=l(e,t);D.update(s.recipe.order,n),z.update(d()),B.update(d()),j.update(s.recipe.ingredients),K.update(d()),X.render(u())};window.addEventListener("load",(()=>{D.render(s.recipe.order),z.render(),B.update(d()),j.render(s.recipe.ingredients),K.update(d()),X.render(u())})),j.addHandlerUpdateQuantity(J);
//# sourceMappingURL=index.f056d590.js.map
